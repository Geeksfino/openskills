## OpenSkills Agent with Vercel AI SDK (Claude Skills Compatible)

This example demonstrates the correct pattern for using Claude Skills:

- **Skill-agnostic**: No hardcoded knowledge about any specific skill
- **Runtime-provided tools**: Uses pre-built tools from `@finogeek/openskills/tools`
- **Generic system prompt**: Teaches the agent HOW to use skills, not WHAT they do

### How Claude Skills Work

1. **Discovery**: Agent discovers skills from the skills directory at startup
2. **Matching**: Agent matches user requests to skills via semantic understanding
3. **Activation**: Agent calls `activate_skill(id)` to get full SKILL.md instructions
4. **Following**: Agent reads and follows the instructions exactly - all domain knowledge comes from the skill
5. **Execution**: Agent uses helper files and scripts as directed by the skill

### Key Design Principles

1. **Skills are user-configured, not agent-known**: The agent should never have skill-specific knowledge hardcoded
2. **SKILL.md contains all knowledge**: Each skill provides everything the agent needs
3. **Runtime provides tools**: The runtime provides pre-built tools so agents don't reinvent the wheel
4. **Workspace is managed**: Output files go to a sandboxed workspace directory

### Features

- ✅ Uses pre-built tools from `@finogeek/openskills/tools` (~120 lines vs ~470 lines manually)
- ✅ Skill-agnostic system prompt generated by runtime
- ✅ Workspace directory for file I/O
- ✅ Works with any Claude Skill without code changes

### Setup

1. Install dependencies:
```bash
npm install
```

2. Copy `.env.example` to `.env` and set your API key:
```bash
cp .env.example .env
# Edit .env and add your DEEPSEEK_API_KEY
```

3. Build the TypeScript bindings (from repository root):
```bash
cd ../../../bindings/ts
npm install
npm run build
```

### Usage

```bash
# Run with a query (uses default skills directory: examples/skills)
npm start "What skills are available?"

# Run with a task
npm start "Create a Word document with title 'Test'"
```

### CLI Options

| Option | Description |
|--------|-------------|
| `--skills-dir <path>` | Path to skills directory (default: `examples/skills`) |

### Testing

See [TESTING.md](./TESTING.md) for detailed test documentation.

#### Quick Test Commands

```bash
# Test with Claude official skills (3P update)
npm run start:official -- "What skills are available?"

# Test with custom WASM skills (skill creation)
npm start "Create a new skill called 'note-taker'"
```

### Architecture

```
┌─────────────────────────────────────────────────────────────┐
│              Vercel AI SDK Agent (~120 lines)              │
│  - Imports pre-built tools from @finogeek/openskills/tools │
│  - Uses runtime.getAgentSystemPrompt() for system prompt   │
│  - No skill-specific knowledge                              │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│              @finogeek/openskills Runtime                   │
│  - discover_skills() → metadata only                       │
│  - activate_skill() → full SKILL.md instructions           │
│  - read_skill_file() → helper files                        │
│  - run_skill_target() → sandboxed script execution         │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                    Skills Directory                          │
│  ~/.claude/skills/ or .claude/skills/                       │
│  └── docx/                                                  │
│      ├── SKILL.md          ← Full instructions             │
│      ├── docx-js.md        ← Helper documentation          │
│      └── scripts/          ← Python/shell scripts          │
└─────────────────────────────────────────────────────────────┘
```

### Pre-built Tools

The `createSkillTools()` function provides these tools:

| Tool | Description |
|------|-------------|
| `list_skills` | List available skills |
| `activate_skill` | Load full SKILL.md instructions |
| `read_skill_file` | Read helper files from a skill |
| `list_skill_files` | List files in a skill directory |
| `run_skill_script` | Run sandboxed scripts or WASM modules |
| `run_sandboxed_bash` | Run sandboxed bash commands |
| `write_file` | Write to workspace directory |
| `read_file` | Read from workspace directory |

### Notes

- Skills are loaded from `examples/skills` by default (configurable via `--skills-dir`)
- The agent learns everything from SKILL.md - no prior knowledge needed
- Output files go to the `output/` workspace directory
- Uses DeepSeek API (OpenAI-compatible) by default
